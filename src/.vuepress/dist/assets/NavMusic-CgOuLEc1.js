import{h as v,p as c,K as p,r,U as y,o as h,w as f,a as o,V as _,b as M,W as g,d as S,X as w}from"./app-WCtHtnaD.js";const C={class:"MyMusic"},b={class:"iframe-container"},I=["src"],N=v({__name:"NavMusic",setup(x){const e=c(!1),a=c(!1),s=c(null),u=()=>{e.value=!e.value,a.value=!0,localStorage.setItem("playerStatus","playing")},d=()=>{e.value=!1,localStorage.setItem("playerStatus","hidden")},m=()=>{const t=document.querySelector(".vp-navbar-end");if(!t||document.querySelector("#MyMusic_Menu"))return;const n=document.createElement("div");n.id="MyMusic_Menu",n.classList.add("nav-item"),n.innerHTML='<div id="MyMusic_icon" class="btnImg"></div>',t.appendChild(n);const i=document.querySelector("#MyMusic_Menu");i.onclick=l=>{u(),l.stopPropagation()}};return p(()=>{m();const t=localStorage.getItem("playerStatus");t==="playing"?(e.value=!0,a.value=!0):t==="hidden"&&(e.value=!1,a.value=!0),document.addEventListener("visibilitychange",function(){document.hidden&&s.value&&s.value.contentWindow&&s.value.contentWindow.postMessage({action:"continue"},"*")})}),(t,n)=>{const i=r("MyIcon"),l=r("ClientOnly");return h(),y(l,null,{default:f(()=>[o("div",C,[o("div",{class:_(["MyMusic_Play",{hide:!e.value}])},[o("div",{class:"close",onClick:d},[S(i,{name:"guanbi"})]),M(" 使用 v-show 来控制 iframe 的显示和隐藏 "),g(o("div",b,[o("iframe",{src:a.value?"https://music.163.com/outchain/player?type=0&id=7509488307&auto=0&height=1000":"",frameborder:"0",width:"100%",height:"100%",style:{"pointer-events":"auto",border:"none","box-shadow":"none"},loading:"lazy",sandbox:"allow-scripts allow-same-origin",ref:"playerIframe"},null,8,I)],512),[[w,e.value&&a.value]])],2)])]),_:1})}}});export{N as default};
