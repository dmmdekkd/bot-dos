import{h as X,p as E,K as O,T as d,i as R,r as U,U as q,o as b,w as K,c as S,b as A,u as i,a as l,V as D,d as m,Y as g,t as M}from"./app-WCtHtnaD.js";import{_ as r}from"./MyIcon.vue_vue_type_style_index_0_lang-6LgDOdOR.js";const $={class:"Mo7PreviewBox-topBar"},j=["href"],G=["src","alt"],J={class:"Mo7PreviewBox-idxView"},Q={class:"Mo7PreviewBox-idxView-box"},Z={class:"Mo7PreviewBox-idxView-idx"},ee={key:0,class:"Mo7PreviewBox-idxView-alt"},ie=X({__name:"PreviewImage",setup(te){let c=E([]),f=E(!1),s=E(0);function H(){f.value=!1,document.body.style.overflow="auto"}function F(){const e=document.getElementById("Mo7PreviewBox-img");let o=e.clientWidth,t=e.clientHeight;o=o*1.1,e.style.width=o+"px",t=t*1.1,e.style.height=t+"px"}function N(){const e=document.getElementById("Mo7PreviewBox-img");let o=e.clientWidth,t=e.clientHeight;o=o*.9,e.style.width=o+"px",t=t*.9,e.style.height=t+"px"}function W(){const e=document.getElementById("Mo7PreviewBox-img");window.open(e.getAttribute("src"))}function z(){s.value>0&&s.value--,d(()=>{v()})}function Y(){s.value<c.value.length-1&&s.value++,d(()=>{v()})}function v(){const e=document.getElementById("Mo7PreviewBox"),o=e.clientWidth,t=e.clientHeight,n=document.getElementById("Mo7PreviewBox-img");n.style.width=o*.9+"px",n.style.height="",n.style.maxWidth="",n.style.maxHeight="",n.style.left="",n.style.top="",n.style.cursor="",n.clientHeight>t&&(n.style.width="",n.style.height=t*.9+"px")}function I(e){const t=e.target.getAttribute("src");let n=s.value;for(let a=0;a<c.value.length;a++)if(c.value[a].src===t){n=a;break}s.value=n,f.value=!0,document.body.style.overflow="hidden",d(()=>{v()})}function p(e){console.log("初始化图片预览",e);let o=document.getElementsByClassName("theme-hope-content"),t=null;if(o.length>0&&(t=o[0]),!t)return;const n=t.getElementsByTagName("img"),a=[];for(let u=0;u<n.length;u++){const h=n[u];e==="bind"&&a.push({alt:h.getAttribute("alt"),src:h.getAttribute("src")}),h.removeEventListener("click",I),e==="bind"&&h.addEventListener("click",I)}c.value=a}let w=!1,x=0,y=0,B=0,_=0;function C(e){if(!w)return;const o=e.clientX-x,t=e.clientY-y,n=B+o,a=_+t,u=document.getElementById("Mo7PreviewBox-img");u.style.left=n+"px",u.style.top=a+"px"}function L(){const e=document.getElementById("Mo7PreviewBox-img");e.style.cursor="default",w=!1,x=0,y=0,B=0,_=0}function P(e){const o=document.getElementById("Mo7PreviewBox-img");o.style.cursor="move",w=!0,console.log("按下",e),x=e.clientX,y=e.clientY;let t;window.getComputedStyle?t=window.getComputedStyle(o,null):t=o.currentStyle,B=parseInt(t.left),_=parseInt(t.top)}function k(e){e.type==="touchmove"&&e.touches.length==1&&C(e.touches[0]),e.type==="mousemove"&&C(e)}function T(e){L()}function V(e){e.type==="touchstart"&&e.touches.length==1&&P(e.touches[0]),e.type==="mousedown"&&P(e)}return O(()=>{d(()=>{p("bind")});const e=R();e.beforeEach((o,t)=>{o.path!==t.path&&p("unbind")}),e.afterEach((o,t)=>{o.path!==t.path&&d(()=>{setTimeout(()=>{p("bind")},1e3)})})}),(e,o)=>{const t=U("ClientOnly");return b(),q(t,null,{default:K(()=>[i(f)?(b(),S("div",{key:0,id:"Mo7PreviewBox",onMousemove:k,onTouchmove:k,onMouseup:T,onTouchend:T},[l("div",$,[l("div",{class:D(["btn",{hide:i(s)===0}]),onClick:z},[m(r,{class:"icon",name:"xiangzuo"})],2),l("div",{class:D(["btn",{hide:i(s)===i(c).length-1}]),onClick:Y},[m(r,{class:"icon",name:"xiangyou"})],2),l("div",{class:"btn",onClick:g(F,["stop"])},[m(r,{class:"icon",name:"fangda"})]),l("div",{class:"btn",onClick:g(N,["stop"])},[m(r,{class:"icon",name:"suoxiao"})]),l("div",{class:"btn",onClick:g(W,["stop"])},[m(r,{class:"icon",name:"quanping"})]),l("a",{class:"btn",href:i(c)[i(s)].src,download:""},[m(r,{class:"icon",name:"xiazai"})],8,j),l("div",{class:"btn",onClick:g(H,["stop"])},[m(r,{class:"icon",name:"guanbi"})])]),l("img",{id:"Mo7PreviewBox-img",onMousedown:V,onTouchstart:V,src:i(c)[i(s)].src,alt:i(c)[i(s)].alt,srcset:""},null,40,G),l("div",J,[l("div",Q,[l("div",Z,M(i(s)+1)+"/"+M(i(c).length),1),i(c)[i(s)].alt?(b(),S("div",ee,M(i(c)[i(s)].alt),1)):A("v-if",!0)])])],32)):A("v-if",!0)]),_:1})}}});export{ie as default};
